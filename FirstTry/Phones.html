<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>BestPrice</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
    /* Custom CSS to adjust image size */
    .navbar-img {
        width: 40px; /* Adjust the width to your preference */
        height: 40px; /* Adjust the height to your preference */
        border-radius: 50%; /* Makes the image circular */
    }
    /* This page is used for the when the elements are searched using the searchbar */
</style>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="js/bootstrap.bundle.js"></script>
  </head>
  <body>

    <nav class="navbar navbar-expand-sm bg-secondary p-3 navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">BestPrice</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li> 
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Categories</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="Phones.html">Phones</a></li>
                <li><a class="dropdown-item" href="Laptops.html">Laptops</a></li>
                <li><a class="dropdown-item" href="Tablets.html">Tablets</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <form class="d-flex">
          <input class="form-control me-2" type="text" id="searchInput" placeholder="What are you looking for?">
          <button class="btn btn-primary ml-2" type="button" onclick="search()">Search</button>
      </form>

      <ul class="navbar-nav ml-2 ms-4">
          <li class="nav-item">
              <a href="Favorite.html" target="_blank"><img src="images/favorite2.png" alt="Favorites" class="navbar-img"></a>
          </li>
      </ul>
      </div>
    </nav>

    <div class = "row">
      <div class="container mt-3 col-sm-4">
        <h2 style="padding-left: 10px; color: #333;">Don't have any ideas?</h2>
        <p style="padding-left: 10px; color: #555;">Here are some models that you might be interested.</p>
        <div class="list-group">
          <div class="list-group-item disabled bg-light text-dark">
            <strong>Samsung</strong>
          </div>
          <div class="list-group" style="padding-left: 20px;">
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy s23')">Galaxy S23</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy s22')">Galaxy S22</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy a54')">Galaxy A54</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy a34')">Galaxy A34</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy a14')">Galaxy A14</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('samsung galaxy z flip5')">Galaxy Z Flip 5</a>
          </div>
          <div class="list-group-item disabled bg-light text-dark">
            <strong>Apple</strong>
          </div>
          <div class="list-group" style="padding-left: 20px;">
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone 14')">iPhone 15</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone 13')">iPhone 14</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone 13')">iPhone 13</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone 13')">iPhone 12</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone 12')">iPhone 11</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('iphone se')">iPhone SE</a>
          </div>
          <div class="list-group-item disabled bg-light text-dark">
            <strong>Huawei</strong>
          </div>
          <div class="list-group" style="padding-left: 20px;">
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei p60 pro')">P60 PRO</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei p50 pro')">P50 PRO</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei nova 10')">Nova 10</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei nova y70')">Nova Y70</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei nova y90')">Nova Y90</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('huawei mate 50 pro')">Mate 50 PRO</a>
          </div>
          <div class="list-group-item disabled bg-light text-dark">
            <strong>Realme</strong>
          </div>
          <div class="list-group" style="padding-left: 20px;">
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme 9')">Realme 9</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme 10')">Realme 10</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme 11 pro')">Realme 11 PRO</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme c31')">Realme C31</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme c35')">Realme C35</a>
            <a href="#" class="list-group-item list-group-item-action" style="background-color: #f2f2f2;" onclick="searchPhone('realme c55')">Realme C55</a>
          </div>
        </div>
      </div>
      



      <div id="loading" class="mt-3 col-sm-8 text-center load-more" style="display: none;">
        <button class="btn btn-info btn-lg" type="button" disabled>
        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span> Loading...
        </button>
     </div>

      <div class="col-sm-8" id="resultContainer">
        <h2 class="text-center">Explore the Latest Smartphones</h2>
        <p class="lead text-center text-muted">Discover a wide range of smartphones from top brands.</p>
        <div class="text-center mt-4">
          <img src="images/phonePage.jpg" alt="Phone Image" class="img-fluid" style="max-width: 400px;">
        </div>
      </div>
      
    </div>


    <footer class="bg-dark text-center text-white">
      <!-- Grid container -->
      <div class="container p-4 pb-0">
        <!-- Section: Social media -->
        <section class="mb-4">
          <!-- Facebook -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" fill="white" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"/></svg></a>
    
          <!-- Twitter -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" fill="white" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5 .3 9.1 .3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53 51.7 63.7 129.3 105.3 216.4 109.8-1.6-7.8-2.6-15.9-2.6-24 0-57.8 46.8-104.9 104.9-104.9 30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3z"/></svg></a>
    
          <!-- Google -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="15.25" fill="white" viewBox="0 0 488 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg></a>
    
          <!-- Instagram -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" fill="white" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></a>
    
          <!-- Linkedin -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" fill="white" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
    
          <!-- Github -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="15.5" fill="white" viewBox="0 0 496 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a>
        </section>
        <!-- Section: Social media -->
      </div>
      <!-- Grid container -->
    
      <!-- Copyright -->
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        © 2024 Copyright:
        <a class="text-white" href="https://mdbootstrap.com/">BestPrice</a>
      </div>
      <!-- Copyright -->
    </footer>



  <script>

    function searchPhone(phoneModel) {
      // Set the value of the search input to the clicked phone model
      document.getElementById('searchInput').value = phoneModel;

      // Call the search function
      search();
    }

    function search() {
    // Get user input from the search bar
    var userInput = document.getElementById('searchInput').value;
    var brand = "";
    var model = "";

    // Define a default manufacturer
    var defaultManufacturer = 'defaultManufacturer'; // Change this to your actual default manufacturer

    // Construct the URL for the web scraper
    var scraperUrl = 'http://localhost:8080/devices/phone/';

    var inputParts = userInput.split(' ');

    // Construct the URL for the web scraper
    if ((userInput.toLowerCase().includes('iphone'))) {
        scraperUrl +=  'apple' + '/' + inputParts.join('-');
        brand = 'apple';
        model = inputParts.join('-');
    // } else if (userInput.toLowerCase().includes('iphone')) {
    //   scraperUrl +=  'apple' + '/' + inputParts.join('-');
    } else {
      scraperUrl += inputParts[0] + '/' + inputParts.slice(1).join('-');
      brand = inputParts[0];
      model = inputParts.slice(1).join('-');
      // document.getElementById('resultContainer').innerHTML = "<h2>We're sorry, Unfortunately we cannot search for the desired item. Please check the list from the left panel</h2>";
      // return;
    }

    document.getElementById('resultContainer').innerHTML = "";

    // Display loading screen
    var loadingElement = document.getElementById('loading');
    if (loadingElement) {
        loadingElement.style.display = 'block';
    }

    // Use fetch to simplify asynchronous code
    fetch(scraperUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            // Process the data returned by the web scraper

            //No need for sorting because backend sends it already sorted
            //data.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));

            // Create HTML elements dynamically for each item in the data
            var container = document.getElementById('resultContainer');

            // Clear old content
            container.innerHTML = '';

            if (data.length > 0) {
                data.forEach(function (item) {
                    var cardDiv = document.createElement('div');
                    cardDiv.classList.add('container', 'mt-3', 'bg-secondary', 'bg-gradient', 'text-white', 'p-3', 'rounded'); // Use Bootstrap classes

                    var card = document.createElement('div');
                    card.classList.add('card', 'bg-secondary', 'bg-gradient', 'text-white'); //

                    var row = document.createElement('div');
                    row.classList.add('row', 'g-0');

                    var colImg = document.createElement('div');
                    colImg.classList.add('col-md-4');

                    var colInfo = document.createElement('div');
                    colInfo.classList.add('col-md-8');

                    var cardBody = document.createElement('div');
                    cardBody.classList.add('card-body');

                    // Extract color from the title
                    var titleParts = item.name ? item.name.split(',') : item.title.split(',');

                    var title = document.createElement('h4');
                    title.classList.add('card-title');

                    // Check if titleParts is not an empty array
                    if (titleParts.length > 0) {
                        // Title without the content after the last comma
                        title.textContent = titleParts.slice(0, -1).join(',').trim();

                        // Extract color
                        var color = titleParts[titleParts.length - 1].trim();

                        var priceColor = document.createElement('p');
                        priceColor.classList.add('card-text');
                        priceColor.innerHTML = 'Price: ' + item.price + '<br>Color: ' + color + '<br>'; // Add color
                    } else {
                        // Handle the case where item.name is null or undefined
                        title.textContent = 'Title Not Available';
                        var priceColor = document.createElement('p');
                        priceColor.classList.add('card-text');
                        priceColor.innerHTML = 'Price: ' + item.price + '<br>Color: Not Available<br>';
                    }

                    var link = document.createElement('a');
                    link.href = item.link;
                    link.classList.add('btn', 'btn-primary');
                    link.textContent = 'Go to Website!';
                    link.style.margin = "auto";
                    link.target = "_blank";

                    var localLink = document.createElement('a');
                    localLink.href = 'ItemDescription.html?brand=' + encodeURIComponent(brand) + '&model=' + encodeURIComponent(model) + '&image=' + encodeURIComponent(item.photo) + '&price=' + encodeURIComponent(item.price);
                    localLink.classList.add('btn', 'btn-info', "ml-1");
                    localLink.textContent = 'See details!';
                    localLink.style.margin = "auto";
                    localLink.target = "_blank";

                    var favoriteBtn = document.createElement('button');
                    favoriteBtn.classList.add('btn', 'btn-outline-danger', 'ml-1');
                    favoriteBtn.textContent = 'Add to Favorites';
                    favoriteBtn.style.margin = "auto";
                    favoriteBtn.addEventListener('click', function(event) {
                    addFavorite(item.name, item.price, item.link); 
                    });

                    var cardImage = document.createElement('img');
                    cardImage.classList.add('img-fluid');
                    cardImage.src = item.photo;

                    var cardStoreImage = document.createElement('img');
                    cardStoreImage.style.margin = "50px";
                    cardStoreImage.style.height = "50px"
                    cardStoreImage.style.width = "auto";
                    

                    // Check if the link contains "mediagalaxy" or "altex" and set the image source accordingly
                    if (item.link.includes('mediagalaxy')) {
                      cardStoreImage.src = 'Pictures/mediagalaxy.png'; // Replace with the actual path to your image
                    } else if (item.link.includes('altex')) {
                      cardStoreImage.src = 'Pictures/altex.png'; // Replace with the actual path to your image 
                    } else if (item.link.includes('evomag')) {
                      cardStoreImage.src = 'Pictures/evomag.png';
                    } else if (item.link.includes('flip')) {
                      cardStoreImage.src = 'Pictures/flip.png';
                    } else if (item.link.includes('flanco')) {
                      cardStoreImage.src = 'Pictures/flanco.png';
                    }

                    colImg.appendChild(cardImage);
                    colInfo.appendChild(cardBody);
                    row.appendChild(colImg);
                    row.appendChild(colInfo);
                    cardBody.appendChild(title);
                    cardBody.appendChild(priceColor);
                    var linkAndStoreImg = document.createElement('div');
                    linkAndStoreImg.appendChild(link);
                    linkAndStoreImg.appendChild(localLink);
                    linkAndStoreImg.appendChild(favoriteBtn);
                    linkAndStoreImg.appendChild(cardStoreImage);
                    // cardBody.appendChild(link);
                    // cardBody.appendChild(cardStoreImage);
                    cardBody.appendChild(linkAndStoreImg);
                    card.appendChild(row);
                    cardDiv.appendChild(card);
                    container.appendChild(cardDiv);
                });
            } else {
                var noResultsMessage = document.createElement('h2');
                noResultsMessage.textContent = "We're sorry, we weren't able to find the item you're looking for.";
                container.appendChild(noResultsMessage);
            }
        })
        .catch(error => {
            // Handle errors
            console.error('Error:', error);
            var container = document.getElementById('resultContainer');
            container.innerHTML = '';
            var noResultsMessage = document.createElement('h2');
            noResultsMessage.textContent = "We're sorry, we weren't able to find the item you're looking for. Please try to be more specific";
            container.appendChild(noResultsMessage);
        })
        .finally(() => {
            // Hide loading screen regardless of success or failure
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
        });

      

        function addFavorite(name, price, link){
          console.log(`Name: ${name}, Price: ${price}, Link: ${link}`);
          fetch('http://localhost:8080/favourites/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    // Include any additional headers if required, e.g., authentication headers
                },
                body: JSON.stringify({
                    name: name,
                    price : price,
                    link : link
                }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                // Handle success (you may want to update the UI, add a new card, etc.)
                console.log('Successfully saved new favorite item');
            })
            .catch(error => console.error('Error saving new favorite item:', error));
        }
}




  </script>
  </body>
</html>